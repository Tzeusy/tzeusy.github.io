(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58625,e=>{"use strict";e.i(70698);var t=e.i(21161),t=t,n=t;e.i(72627);var r=e.i(50011);function o(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t,n,r){return{x:Math.pow(1-e,2)*t.x+2*(1-e)*e*n.x+Math.pow(e,2)*r.x,y:Math.pow(1-e,2)*t.y+2*(1-e)*e*n.y+Math.pow(e,2)*r.y}}function g(e){var t=e.curvatureAttribute,n=e.defaultCurvature,r=e.keepLabelUpright,o=void 0===r||r;return function(e,r,i,a,c){var s=c.edgeLabelSize,u=r[t]||n,l=c.edgeLabelFont,v=c.edgeLabelWeight,f=c.edgeLabelColor.attribute?r[c.edgeLabelColor.attribute]||c.edgeLabelColor.color||"#000":c.edgeLabelColor.color,d=r.label;if(d){e.fillStyle=f,e.font="".concat(v," ").concat(s,"px ").concat(l);var g=!o||i.x<a.x,_=g?i.x:a.x,b=g?i.y:a.y,h=g?a.x:i.x,y=g?a.y:i.y,m=(_+h)/2,x=(b+y)/2,T=h-_,w=y-b,A=Math.sqrt(Math.pow(T,2)+Math.pow(w,2)),E=g?1:-1,k=m+w*u*E,S=x-T*u*E,R=.7*r.size+5,O={x:S-b,y:-(k-_)},z=Math.sqrt(Math.pow(O.x,2)+Math.pow(O.y,2)),P={x:y-S,y:-(h-k)},C=Math.sqrt(Math.pow(P.x,2)+Math.pow(P.y,2));_+=R*O.x/z,b+=R*O.y/z,h+=R*P.x/C,y+=R*P.y/C;var I={x:k+=R*w/A,y:S-=R*T/A},M={x:_,y:b},j={x:h,y:y},L=function(e,t,n){for(var r=0,o=e,i=0;i<20;i++){var a=p((i+1)/20,e,t,n);r+=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),o=a}return r}(M,I,j);if(!(L<i.size+a.size)){var D=e.measureText(d).width,N=L-i.size-a.size;if(D>N){for(d+="…",D=e.measureText(d).width;D>N&&d.length>1;)d=d.slice(0,-2)+"…",D=e.measureText(d).width;if(d.length<4)return}for(var B={},U=0,F=d.length;U<F;U++){var G=d[U];B[G]||(B[G]=e.measureText(G).width*(1+.35*u))}for(var V=.5-D/L/2,H=0,q=d.length;H<q;H++){var K=d[H],W=p(V,M,I,j),Q=2*(1-V)*(k-_)+2*V*(h-k),X=Math.atan2(2*(1-V)*(S-b)+2*V*(y-S),Q);e.save(),e.translate(W.x,W.y),e.rotate(X),e.fillText(K,0,0),e.restore(),V+=B[K]/L}}}}}var _={arrowHead:null,curvatureAttribute:"curvature",defaultCurvature:.25},b={edgeIndexAttribute:"parallelIndex",edgeMinIndexAttribute:"parallelMinIndex",edgeMaxIndexAttribute:"parallelMaxIndex"};function h(e,t){var n=c(c({},b),t||{}),r={},o={},i={},a=0;e.forEachNode(function(e){r[e]=++a+""}),e.forEachEdge(function(e,t,n,a){var c=r[n],s=r[a],u=[c,s].join("-");o[e]=u,i[u]=[c,s].sort().join("-")});var s={},u={};for(var l in e.forEachEdge(function(e){var t=o[e],n=i[t];s[t]=s[t]||[],s[t].push(e),u[n]=u[n]||[],u[n].push(e)}),s){var v=s[l],f=v.length,d=u[i[l]].length;if(1===f&&1===d){var p=v[0];e.setEdgeAttribute(p,n.edgeIndexAttribute,null),e.setEdgeAttribute(p,n.edgeMaxIndexAttribute,null)}else if(1===f){var g=v[0];e.setEdgeAttribute(g,n.edgeIndexAttribute,1),e.setEdgeAttribute(g,n.edgeMaxIndexAttribute,1)}else if(f===d)for(var _=(f-1)/2,h=-_,y=0;y<f;y++){var m=v[y],x=-(f-1)/2+y;e.setEdgeAttribute(m,n.edgeIndexAttribute,x),e.setEdgeAttribute(m,n.edgeMinIndexAttribute,h),e.setEdgeAttribute(m,n.edgeMaxIndexAttribute,_)}else for(var T=0;T<f;T++){var w=v[T];e.setEdgeAttribute(w,n.edgeIndexAttribute,T+1),e.setEdgeAttribute(w,n.edgeMaxIndexAttribute,f)}}}var y=WebGLRenderingContext,m=y.UNSIGNED_BYTE,x=y.FLOAT;function T(e){var n=c(c({},_),e||{}),a=n.arrowHead,f=n.curvatureAttribute,p=n.drawLabel,b=(null==a?void 0:a.extremity)==="target"||(null==a?void 0:a.extremity)==="both",h=(null==a?void 0:a.extremity)==="source"||(null==a?void 0:a.extremity)==="both",y=["u_matrix","u_sizeRatio","u_dimensions","u_pixelRatio","u_feather","u_minEdgeThickness"].concat(d(a?["u_lengthToThicknessRatio","u_widenessToThicknessRatio"]:[]));return function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function c(){var e,t,r;if(!(this instanceof c))throw TypeError("Cannot call a class as a function");for(var o=arguments.length,a=Array(o),v=0;v<o;v++)a[v]=arguments[v];return t=c,r=[].concat(a),t=s(t),e=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return l(e)}(this,u()?Reflect.construct(t,r||[],s(this).constructor):t.apply(this,r)),i(l(e),"drawLabel",p||g(n)),e}return c.prototype=Object.create(e&&e.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),e&&v(c,e),t=[{key:"getDefinition",value:function(){var e,t,r,o,i,a;return{VERTICES:6,VERTEX_SHADER_SOURCE:(t=(null==(e=n.arrowHead)?void 0:e.extremity)==="target"||(null==e?void 0:e.extremity)==="both",r=(null==e?void 0:e.extremity)==="source"||(null==e?void 0:e.extremity)==="both","\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute float a_direction;\nattribute float a_thickness;\nattribute vec2 a_source;\nattribute vec2 a_target;\nattribute float a_current;\nattribute float a_curvature;\n".concat(t?"attribute float a_targetSize;\n":"","\n").concat(r?"attribute float a_sourceSize;\n":"","\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform vec2 u_dimensions;\nuniform float u_minEdgeThickness;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying float v_thickness;\nvarying float v_feather;\nvarying vec2 v_cpA;\nvarying vec2 v_cpB;\nvarying vec2 v_cpC;\n").concat(t?"\nvarying float v_targetSize;\nvarying vec2 v_targetPoint;":"","\n").concat(r?"\nvarying float v_sourceSize;\nvarying vec2 v_sourcePoint;":"","\n").concat(e?"\nuniform float u_widenessToThicknessRatio;":"",'\n\nconst float bias = 255.0 / 254.0;\nconst float epsilon = 0.7;\n\nvec2 clipspaceToViewport(vec2 pos, vec2 dimensions) {\n  return vec2(\n    (pos.x + 1.0) * dimensions.x / 2.0,\n    (pos.y + 1.0) * dimensions.y / 2.0\n  );\n}\n\nvec2 viewportToClipspace(vec2 pos, vec2 dimensions) {\n  return vec2(\n    pos.x / dimensions.x * 2.0 - 1.0,\n    pos.y / dimensions.y * 2.0 - 1.0\n  );\n}\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  // Selecting the correct position\n  // Branchless "position = a_source if a_current == 1.0 else a_target"\n  vec2 position = a_source * max(0.0, a_current) + a_target * max(0.0, 1.0 - a_current);\n  position = (u_matrix * vec3(position, 1)).xy;\n\n  vec2 source = (u_matrix * vec3(a_source, 1)).xy;\n  vec2 target = (u_matrix * vec3(a_target, 1)).xy;\n\n  vec2 viewportPosition = clipspaceToViewport(position, u_dimensions);\n  vec2 viewportSource = clipspaceToViewport(source, u_dimensions);\n  vec2 viewportTarget = clipspaceToViewport(target, u_dimensions);\n\n  vec2 delta = viewportTarget.xy - viewportSource.xy;\n  float len = length(delta);\n  vec2 normal = vec2(-delta.y, delta.x) * a_direction;\n  vec2 unitNormal = normal / len;\n  float boundingBoxThickness = len * a_curvature;\n\n  float curveThickness = max(minThickness, a_thickness / u_sizeRatio);\n  v_thickness = curveThickness * u_pixelRatio;\n  v_feather = u_feather;\n\n  v_cpA = viewportSource;\n  v_cpB = 0.5 * (viewportSource + viewportTarget) + unitNormal * a_direction * boundingBoxThickness;\n  v_cpC = viewportTarget;\n\n  vec2 viewportOffsetPosition = (\n    viewportPosition +\n    unitNormal * (boundingBoxThickness / 2.0 + sign(boundingBoxThickness) * (').concat(e?"curveThickness * u_widenessToThicknessRatio":"curveThickness"," + epsilon)) *\n    max(0.0, a_direction) // NOTE: cutting the bounding box in half to avoid overdraw\n  );\n\n  position = viewportToClipspace(viewportOffsetPosition, u_dimensions);\n  gl_Position = vec4(position, 0, 1);\n    \n").concat(t?"\n  v_targetSize = a_targetSize * u_pixelRatio / u_sizeRatio;\n  v_targetPoint = viewportTarget;\n":"","\n").concat(r?"\n  v_sourceSize = a_sourceSize * u_pixelRatio / u_sizeRatio;\n  v_sourcePoint = viewportSource;\n":"","\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n")),FRAGMENT_SHADER_SOURCE:(i=(null==(o=n.arrowHead)?void 0:o.extremity)==="target"||(null==o?void 0:o.extremity)==="both",a=(null==o?void 0:o.extremity)==="source"||(null==o?void 0:o.extremity)==="both","\nprecision highp float;\n\nvarying vec4 v_color;\nvarying float v_thickness;\nvarying float v_feather;\nvarying vec2 v_cpA;\nvarying vec2 v_cpB;\nvarying vec2 v_cpC;\n".concat(i?"\nvarying float v_targetSize;\nvarying vec2 v_targetPoint;":"","\n").concat(a?"\nvarying float v_sourceSize;\nvarying vec2 v_sourcePoint;":"","\n").concat(o?"\nuniform float u_lengthToThicknessRatio;\nuniform float u_widenessToThicknessRatio;":"","\n\nfloat det(vec2 a, vec2 b) {\n  return a.x * b.y - b.x * a.y;\n}\n\nvec2 getDistanceVector(vec2 b0, vec2 b1, vec2 b2) {\n  float a = det(b0, b2), b = 2.0 * det(b1, b0), d = 2.0 * det(b2, b1);\n  float f = b * d - a * a;\n  vec2 d21 = b2 - b1, d10 = b1 - b0, d20 = b2 - b0;\n  vec2 gf = 2.0 * (b * d21 + d * d10 + a * d20);\n  gf = vec2(gf.y, -gf.x);\n  vec2 pp = -f * gf / dot(gf, gf);\n  vec2 d0p = b0 - pp;\n  float ap = det(d0p, d20), bp = 2.0 * det(d10, d0p);\n  float t = clamp((ap + bp) / (2.0 * a + b + d), 0.0, 1.0);\n  return mix(mix(b0, b1, t), mix(b1, b2, t), t);\n}\n\nfloat distToQuadraticBezierCurve(vec2 p, vec2 b0, vec2 b1, vec2 b2) {\n  return length(getDistanceVector(b0 - p, b1 - p, b2 - p));\n}\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = distToQuadraticBezierCurve(gl_FragCoord.xy, v_cpA, v_cpB, v_cpC);\n  float thickness = v_thickness;\n").concat(i?"\n  float distToTarget = length(gl_FragCoord.xy - v_targetPoint);\n  float targetArrowLength = v_targetSize + thickness * u_lengthToThicknessRatio;\n  if (distToTarget < targetArrowLength) {\n    thickness = (distToTarget - v_targetSize) / (targetArrowLength - v_targetSize) * u_widenessToThicknessRatio * thickness;\n  }":"","\n").concat(a?"\n  float distToSource = length(gl_FragCoord.xy - v_sourcePoint);\n  float sourceArrowLength = v_sourceSize + thickness * u_lengthToThicknessRatio;\n  if (distToSource < sourceArrowLength) {\n    thickness = (distToSource - v_sourceSize) / (sourceArrowLength - v_sourceSize) * u_widenessToThicknessRatio * thickness;\n  }":"","\n\n  float halfThickness = thickness / 2.0;\n  if (dist < halfThickness) {\n    #ifdef PICKING_MODE\n    gl_FragColor = v_color;\n    #else\n    float t = smoothstep(\n      halfThickness - v_feather,\n      halfThickness,\n      dist\n    );\n\n    gl_FragColor = mix(v_color, transparent, t);\n    #endif\n  } else {\n    gl_FragColor = transparent;\n  }\n}\n")),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:y,ATTRIBUTES:[{name:"a_source",size:2,type:x},{name:"a_target",size:2,type:x}].concat(d(b?[{name:"a_targetSize",size:1,type:x}]:[]),d(h?[{name:"a_sourceSize",size:1,type:x}]:[]),[{name:"a_thickness",size:1,type:x},{name:"a_curvature",size:1,type:x},{name:"a_color",size:4,type:m,normalized:!0},{name:"a_id",size:4,type:m,normalized:!0}]),CONSTANT_ATTRIBUTES:[{name:"a_current",size:1,type:x},{name:"a_direction",size:1,type:x}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[0,-1],[1,1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,t,n,o,i){var a,c=i.size||1,s=n.x,u=n.y,l=o.x,v=o.y,d=(0,r.floatColor)(i.color),p=null!=(a=i[f])?a:.25,g=this.array;g[t++]=s,g[t++]=u,g[t++]=l,g[t++]=v,b&&(g[t++]=o.size),h&&(g[t++]=n.size),g[t++]=c,g[t++]=p,g[t++]=d,g[t++]=e}},{key:"setUniforms",value:function(e,t){var n=t.gl,r=t.uniformLocations,o=r.u_matrix,i=r.u_pixelRatio,c=r.u_feather,s=r.u_sizeRatio,u=r.u_dimensions,l=r.u_minEdgeThickness;if(n.uniformMatrix3fv(o,!1,e.matrix),n.uniform1f(i,e.pixelRatio),n.uniform1f(s,e.sizeRatio),n.uniform1f(c,e.antiAliasingFeather),n.uniform2f(u,e.width*e.pixelRatio,e.height*e.pixelRatio),n.uniform1f(l,e.minEdgeThickness),a){var v=r.u_lengthToThicknessRatio,f=r.u_widenessToThicknessRatio;n.uniform1f(v,a.lengthToThicknessRatio),n.uniform1f(f,a.widenessToThicknessRatio)}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}(c.prototype,t),Object.defineProperty(c,"prototype",{writable:!1}),c}(t.g)}var w=T(),A=T({arrowHead:n.D}),E=T({arrowHead:c(c({},n.D),{},{extremity:"both"})});e.s(["DEFAULT_EDGE_CURVATURE",()=>.25,"DEFAULT_EDGE_CURVE_PROGRAM_OPTIONS",()=>_,"DEFAULT_INDEX_PARALLEL_EDGES_OPTIONS",()=>b,"EdgeCurvedArrowProgram",()=>A,"EdgeCurvedDoubleArrowProgram",()=>E,"createDrawCurvedEdgeLabel",()=>g,"createEdgeCurveProgram",()=>T,"default",()=>w,"indexParallelEdgesIndex",()=>h],58625)}]);