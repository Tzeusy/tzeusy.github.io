(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78251,(e,t,n)=>{t.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode&&"boolean"==typeof e.multi}},21161,67623,17022,e=>{"use strict";function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function r(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e,t,n){return t=o(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,a()?Reflect.construct(t,n||[],o(e).constructor):t.apply(e,n))}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(e){if("string"==typeof e)return u(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||f(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.s(["_",()=>c,"a",()=>i,"b",()=>n,"c",()=>s,"d",()=>t,"e",()=>o],67623);var d={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},m=new Int8Array(4),_=new Int32Array(m.buffer,0,1),g=new Float32Array(m.buffer,0,1),T=/^\s*rgba?\s*\(/,v=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/,E={};for(var b in d)E[b]=R(d[b]),E[d[b]]=E[b];function p(e,t,n,r,i){return _[0]=r<<24|n<<16|t<<8|e,i&&(_[0]=0xfeffffff&_[0]),g[0]}function R(e){if(void 0!==E[e=e.toLowerCase()])return E[e];var t=function(e){var t=0,n=0,r=0,i=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),n=parseInt(e.charAt(2)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(4),16),r=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(i=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(T.test(e)){var o=e.match(v);o&&(t=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:t,g:n,b:r,a:i}}(e),n=t.r,r=t.g,i=t.b,o=t.a,a=p(n,r,i,o=255*o|0,!0);return E[e]=a,a}var A={};function y(e){if(void 0!==A[e])return A[e];var t=p((0xff0000&e)>>>16,(65280&e)>>>8,255&e,255,!0);return A[e]=t,t}function F(e,t,n,r){return n+(t<<8)+(e<<16)}function S(e,t,n,r,i,o){var a=Math.floor(n/o*i),s=Math.floor(e.drawingBufferHeight/o-r/o*i),l=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(a,s,1,1,e.RGBA,e.UNSIGNED_BYTE,l);var c=h(l,4);return[c[0],c[1],c[2],c[3]]}function C(e,n,r){return(n=t(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(){return(N="u">typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(null,arguments)}function D(e,t,n,r){var i=N(o(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function I(e){var t=0;return e.forEach(function(e){return t+=e.normalized?1:e.size}),t}function x(e,t,n){var r="VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER,i=t.createShader(r);if(null===i)throw Error("loadShader: error while creating the shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(i);throw t.deleteShader(i),Error("loadShader: error while compiling the shader:\n".concat(o,"\n").concat(n))}return i}function O(e){var t=e.gl,n=e.buffer,r=e.program,i=e.vertexShader,o=e.fragmentShader;t.deleteShader(i),t.deleteShader(o),t.deleteProgram(r),t.deleteBuffer(n)}e.s(["_",()=>h,"a",()=>u,"b",()=>f,"c",()=>F,"f",()=>R,"g",()=>S,"i",()=>y],17022);var L="#define PICKING_MODE\n",B=C(C(C(C(C(C(C(C({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),z=i(function e(t,r,i){n(this,e),C(this,"array",new Float32Array),C(this,"constantArray",new Float32Array),C(this,"capacity",0),C(this,"verticesCount",0);var o=this.getDefinition();if(this.VERTICES=o.VERTICES,this.VERTEX_SHADER_SOURCE=o.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=o.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=o.UNIFORMS,this.ATTRIBUTES=o.ATTRIBUTES,this.METHOD=o.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in o?o.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in o?o.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in o,this.ATTRIBUTES_ITEMS_COUNT=I(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",t,o.VERTEX_SHADER_SOURCE,o.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=r?this.getProgramInfo("pick",t,L+o.VERTEX_SHADER_SOURCE,L+o.FRAGMENT_SHADER_SOURCE,r):null,this.isInstanced){var a=I(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var s=0;s<this.CONSTANT_DATA.length;s++){var l=this.CONSTANT_DATA[s];if(l.length!==a)throw Error("Program: error while getting constant data (one vector has ".concat(l.length," items instead of ").concat(a,")"));for(var c=0;c<l.length;c++)this.constantArray[s*a+c]=l[c]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}},[{key:"kill",value:function(){O(this.normalProgram),this.pickProgram&&(O(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(e,t,n,r,i){var o,a=this.getDefinition(),s=t.createBuffer();if(null===s)throw Error("Program: error while creating the WebGL buffer.");var l=x("VERTEX",t,n),c=x("FRAGMENT",t,r),u=function(e,t){var n,r,i=e.createProgram();if(null===i)throw Error("loadProgram: error while creating the program.");for(n=0,r=t.length;n<r;n++)e.attachShader(i,t[n]);if(e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw e.deleteProgram(i),Error("loadProgram: error while linking the program.");return i}(t,[l,c]),f={};a.UNIFORMS.forEach(function(e){var n=t.getUniformLocation(u,e);n&&(f[e]=n)});var h={};if(a.ATTRIBUTES.forEach(function(e){h[e.name]=t.getAttribLocation(u,e.name)}),"CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(e){h[e.name]=t.getAttribLocation(u,e.name)}),null===(o=t.createBuffer())))throw Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:u,gl:t,frameBuffer:i,buffer:s,constantBuffer:o||{},uniformLocations:f,attributeLocations:h,isPicking:"pick"===e,vertexShader:l,fragmentShader:c}}},{key:"bindProgram",value:function(e){var t=this,n=0,r=e.gl,i=e.buffer;this.isInstanced?(r.bindBuffer(r.ARRAY_BUFFER,e.constantBuffer),n=0,this.CONSTANT_ATTRIBUTES.forEach(function(r){return n+=t.bindAttribute(r,e,n,!1)}),r.bufferData(r.ARRAY_BUFFER,this.constantArray,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),n=0,this.ATTRIBUTES.forEach(function(r){return n+=t.bindAttribute(r,e,n,!0)})):(r.bindBuffer(r.ARRAY_BUFFER,i),n=0,this.ATTRIBUTES.forEach(function(r){return n+=t.bindAttribute(r,e,n)})),r.bufferData(r.ARRAY_BUFFER,this.array,r.DYNAMIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(e){var t=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(n){return t.unbindAttribute(n,e,!1)}),this.ATTRIBUTES.forEach(function(n){return t.unbindAttribute(n,e,!0)})):this.ATTRIBUTES.forEach(function(n){return t.unbindAttribute(n,e)})}},{key:"bindAttribute",value:function(e,t,n,r){var i=B[e.type];if("number"!=typeof i)throw Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var o=t.attributeLocations[e.name],a=t.gl;if(-1!==o){a.enableVertexAttribArray(o);var s=this.isInstanced?(r?this.ATTRIBUTES_ITEMS_COUNT:I(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(a.vertexAttribPointer(o,e.size,e.type,e.normalized||!1,s,n),this.isInstanced&&r)if(a instanceof WebGL2RenderingContext)a.vertexAttribDivisor(o,1);else{var l=a.getExtension("ANGLE_instanced_arrays");l&&l.vertexAttribDivisorANGLE(o,1)}}return e.size*i}},{key:"unbindAttribute",value:function(e,t,n){var r=t.attributeLocations[e.name],i=t.gl;if(-1!==r&&(i.disableVertexAttribArray(r),this.isInstanced&&n))if(i instanceof WebGL2RenderingContext)i.vertexAttribDivisor(r,0);else{var o=i.getExtension("ANGLE_instanced_arrays");o&&o.vertexAttribDivisorANGLE(r,0)}}},{key:"reallocate",value:function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(!this.isInstanced?this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT:this.capacity*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return 0===this.verticesCount}},{key:"renderProgram",value:function(e,t){var n=t.gl,r=t.program;n.enable(n.BLEND),n.useProgram(r),this.setUniforms(e,t),this.drawWebGL(this.METHOD,t)}},{key:"render",value:function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(w(w({},e),{},{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(e,t){var n=t.gl,r=t.frameBuffer;if(n.bindFramebuffer(n.FRAMEBUFFER,r),this.isInstanced)if(n instanceof WebGL2RenderingContext)n.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var i=n.getExtension("ANGLE_instanced_arrays");i&&i.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}else n.drawArrays(e,0,this.verticesCount)}}]),G=function(e){function t(){return n(this,t),s(this,t,arguments)}return c(t,e),i(t,[{key:"kill",value:function(){D(t,"kill",this,3)([])}},{key:"process",value:function(e,t,n){var r=t*this.STRIDE;if(n.hidden){for(var i=r+this.STRIDE;r<i;r++)this.array[r]=0;return}return this.processVisibleItem(y(e),r,n)}}])}(z),P=function(e){function t(){var e;n(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return C(e=s(this,t,[].concat(i)),"drawLabel",void 0),e}return c(t,e),i(t,[{key:"kill",value:function(){D(t,"kill",this,3)([])}},{key:"process",value:function(e,t,n,r,i){var o=t*this.STRIDE;if(i.hidden||n.hidden||r.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(y(e),o,n,r,i)}}])}(z);function U(e,t){return i(function r(i,o,a){n(this,r),C(this,"drawLabel",t),this.programs=e.map(function(e){return new e(i,o,a)})},[{key:"reallocate",value:function(e){this.programs.forEach(function(t){return t.reallocate(e)})}},{key:"process",value:function(e,t,n,r,i){this.programs.forEach(function(o){return o.process(e,t,n,r,i)})}},{key:"render",value:function(e){this.programs.forEach(function(t){return t.render(e)})}},{key:"kill",value:function(){this.programs.forEach(function(e){return e.kill()})}}])}function M(e,t,n,r,i){var o,a=i.edgeLabelSize,s=i.edgeLabelFont,l=i.edgeLabelWeight,c=i.edgeLabelColor.attribute?t[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,u=t.label;if(u){e.fillStyle=c,e.font="".concat(l," ").concat(a,"px ").concat(s);var f=n.size,h=r.size,d=n.x,m=n.y,_=r.x,g=r.y,T=(d+_)/2,v=(m+g)/2,E=_-d,b=g-m,p=Math.sqrt(E*E+b*b);if(!(p<f+h)){d+=E*f/p,m+=b*f/p,_-=E*h/p,g-=b*h/p,T=(d+_)/2,v=(m+g)/2,p=Math.sqrt((E=_-d)*E+(b=g-m)*b);var R=e.measureText(u).width;if(R>p){for(u+="…",R=e.measureText(u).width;R>p&&u.length>1;)u=u.slice(0,-2)+"…",R=e.measureText(u).width;if(u.length<4)return}o=E>0?b>0?Math.acos(E/p):Math.asin(b/p):b>0?Math.acos(E/p)+Math.PI:Math.asin(E/p)+Math.PI/2,e.save(),e.translate(T,v),e.rotate(o),e.fillText(u,-R/2,t.size/2+a),e.restore()}}}function H(e,t,n){if(t.label){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;e.fillStyle=n.labelColor.attribute?t[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color,e.font="".concat(o," ").concat(r,"px ").concat(i),e.fillText(t.label,t.x+t.size+3,t.y+r/3)}}function V(e,t,n){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;if(e.font="".concat(o," ").concat(r,"px ").concat(i),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var a=Math.round(e.measureText(t.label).width+5),s=Math.round(r+4),l=Math.max(t.size,r/2)+2,c=Math.asin(s/2/l),u=Math.sqrt(Math.abs(Math.pow(l,2)-Math.pow(s/2,2)));e.beginPath(),e.moveTo(t.x+u,t.y+s/2),e.lineTo(t.x+l+a,t.y+s/2),e.lineTo(t.x+l+a,t.y-s/2),e.lineTo(t.x+u,t.y-s/2),e.arc(t.x,t.y,l,c,-c),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,H(e,t,n)}var j=WebGLRenderingContext,W=j.UNSIGNED_BYTE,Y=j.FLOAT,q=["u_sizeRatio","u_correctionRatio","u_matrix"],X=function(e){function t(){return n(this,t),s(this,t,arguments)}return c(t,e),i(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\nuniform float u_correctionRatio;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float border = u_correctionRatio * 2.0;\n  float dist = length(v_diffVector) - v_radius + border;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > border)\n    gl_FragColor = transparent;\n  else\n    gl_FragColor = v_color;\n\n  #else\n  float t = 0.0;\n  if (dist > border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / border;\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:q,ATTRIBUTES:[{name:"a_position",size:2,type:Y},{name:"a_size",size:1,type:Y},{name:"a_color",size:4,type:W,normalized:!0},{name:"a_id",size:4,type:W,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Y}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(e,t,n){var r=this.array,i=R(n.color);r[t++]=n.x,r[t++]=n.y,r[t++]=n.size,r[t++]=i,r[t++]=e}},{key:"setUniforms",value:function(e,t){var n=t.gl,r=t.uniformLocations,i=r.u_sizeRatio,o=r.u_correctionRatio,a=r.u_matrix;n.uniform1f(o,e.correctionRatio),n.uniform1f(i,e.sizeRatio),n.uniformMatrix3fv(a,!1,e.matrix)}}])}(G);C(X,"ANGLE_1",0),C(X,"ANGLE_2",2*Math.PI/3),C(X,"ANGLE_3",4*Math.PI/3);var K=WebGLRenderingContext,$=K.UNSIGNED_BYTE,J=K.FLOAT,Q=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],Z={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function ee(e){var t=w(w({},Z),e||{});function r(){return n(this,r),s(this,r,arguments)}return c(r,P),i(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_widenessToThicknessRatio;\n\nvarying vec4 v_color;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Q,ATTRIBUTES:[{name:"a_position",size:2,type:J},{name:"a_normal",size:2,type:J},{name:"a_radius",size:1,type:J},{name:"a_color",size:4,type:$,normalized:!0},{name:"a_id",size:4,type:$,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:J}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(e,n,r,i,o){if("source"===t.extremity){var a=[i,r];r=a[0],i=a[1]}var s=o.size||1,l=i.size||1,c=r.x,u=r.y,f=i.x,h=i.y,d=R(o.color),m=f-c,_=h-u,g=m*m+_*_,T=0,v=0;g&&(T=-_*(g=1/Math.sqrt(g))*s,v=m*g*s);var E=this.array;E[n++]=f,E[n++]=h,E[n++]=-T,E[n++]=-v,E[n++]=l,E[n++]=d,E[n++]=e}},{key:"setUniforms",value:function(e,n){var r=n.gl,i=n.uniformLocations,o=i.u_matrix,a=i.u_sizeRatio,s=i.u_correctionRatio,l=i.u_minEdgeThickness,c=i.u_lengthToThicknessRatio,u=i.u_widenessToThicknessRatio;r.uniformMatrix3fv(o,!1,e.matrix),r.uniform1f(a,e.sizeRatio),r.uniform1f(s,e.correctionRatio),r.uniform1f(l,e.minEdgeThickness),r.uniform1f(c,t.lengthToThicknessRatio),r.uniform1f(u,t.widenessToThicknessRatio)}}])}ee();var et="\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - v_feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",en=WebGLRenderingContext,er=en.UNSIGNED_BYTE,ei=en.FLOAT,eo=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],ea={lengthToThicknessRatio:Z.lengthToThicknessRatio};function es(e){var t=w(w({},ea),e||{});function r(){return n(this,r),s(this,r,arguments)}return c(r,P),i(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:et,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:eo,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ei},{name:"a_positionEnd",size:2,type:ei},{name:"a_normal",size:2,type:ei},{name:"a_color",size:4,type:er,normalized:!0},{name:"a_id",size:4,type:er,normalized:!0},{name:"a_radius",size:1,type:ei}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ei},{name:"a_normalCoef",size:1,type:ei},{name:"a_radiusCoef",size:1,type:ei}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(e,t,n,r,i){var o=i.size||1,a=n.x,s=n.y,l=r.x,c=r.y,u=R(i.color),f=l-a,h=c-s,d=r.size||1,m=f*f+h*h,_=0,g=0;m&&(_=-h*(m=1/Math.sqrt(m))*o,g=f*m*o);var T=this.array;T[t++]=a,T[t++]=s,T[t++]=l,T[t++]=c,T[t++]=_,T[t++]=g,T[t++]=u,T[t++]=e,T[t++]=d}},{key:"setUniforms",value:function(e,n){var r=n.gl,i=n.uniformLocations,o=i.u_matrix,a=i.u_zoomRatio,s=i.u_feather,l=i.u_pixelRatio,c=i.u_correctionRatio,u=i.u_sizeRatio,f=i.u_minEdgeThickness,h=i.u_lengthToThicknessRatio;r.uniformMatrix3fv(o,!1,e.matrix),r.uniform1f(a,e.zoomRatio),r.uniform1f(u,e.sizeRatio),r.uniform1f(c,e.correctionRatio),r.uniform1f(l,e.pixelRatio),r.uniform1f(s,e.antiAliasingFeather),r.uniform1f(f,e.minEdgeThickness),r.uniform1f(h,t.lengthToThicknessRatio)}}])}es();var el=U([es(void 0),ee(void 0)]),ec=WebGLRenderingContext,eu=ec.UNSIGNED_BYTE,ef=ec.FLOAT,eh=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],ed=function(e){function t(){return n(this,t),s(this,t,arguments)}return c(t,e),i(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:'\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least "minThickness" pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n',FRAGMENT_SHADER_SOURCE:et,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:eh,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ef},{name:"a_positionEnd",size:2,type:ef},{name:"a_normal",size:2,type:ef},{name:"a_color",size:4,type:eu,normalized:!0},{name:"a_id",size:4,type:eu,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ef},{name:"a_normalCoef",size:1,type:ef}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(e,t,n,r,i){var o=i.size||1,a=n.x,s=n.y,l=r.x,c=r.y,u=R(i.color),f=l-a,h=c-s,d=f*f+h*h,m=0,_=0;d&&(m=-h*(d=1/Math.sqrt(d))*o,_=f*d*o);var g=this.array;g[t++]=a,g[t++]=s,g[t++]=l,g[t++]=c,g[t++]=m,g[t++]=_,g[t++]=u,g[t++]=e}},{key:"setUniforms",value:function(e,t){var n=t.gl,r=t.uniformLocations,i=r.u_matrix,o=r.u_zoomRatio,a=r.u_feather,s=r.u_pixelRatio,l=r.u_correctionRatio,c=r.u_sizeRatio,u=r.u_minEdgeThickness;n.uniformMatrix3fv(i,!1,e.matrix),n.uniform1f(o,e.zoomRatio),n.uniform1f(c,e.sizeRatio),n.uniform1f(l,e.correctionRatio),n.uniform1f(s,e.pixelRatio),n.uniform1f(a,e.antiAliasingFeather),n.uniform1f(u,e.minEdgeThickness)}}])}(P);e.s(["D",()=>Z,"E",()=>el,"F",()=>et,"N",()=>X,"_",()=>w,"a",()=>C,"b",()=>H,"c",()=>V,"d",()=>M,"e",()=>ed,"f",()=>G,"g",()=>P,"h",()=>U,"i",()=>ee],21161)}]);